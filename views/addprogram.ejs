<%- include('./partials/header.ejs') %>


<div class="container mt-5">
  <h2 class="mb-4">Add New Program</h2>
  <% if (typeof success !== 'undefined' && success) { %>
    <div class="alert alert-success">Program added successfully!</div>
  <% } %>
  <% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-danger"><%= error %></div>
  <% } %>
  <form action="/programs/add" method="POST" enctype="multipart/form-data" class="border p-4 rounded shadow-sm bg-light mb-5">
    <div class="mb-3">
      <label for="title" class="form-label fw-bold">Program Title</label>
      <input type="text" class="form-control" id="title" name="title" placeholder="Enter program title" required>
    </div>
    <div class="mb-3">
      <label for="icon" class="form-label fw-bold">Program Icon</label>
      <input class="form-control" type="file" id="icon" name="icon" accept="image/*" required>
    </div>
    <div class="mb-3">
      <label for="description" class="form-label fw-bold">Short Description</label>
      <textarea class="form-control" id="description" name="description" rows="3" placeholder="Enter short description" required></textarea>
    </div>
    <button type="submit" class="btn btn-primary fw-bold">Add Program</button>
  </form>

  <h3 class="mb-3">Submitted Programs</h3>
  <table class="table table-bordered table-hover" id="programsTable">
    <thead class="table-light">
      <tr>
        <th>Title</th>
        <th>Icon</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% (programs || []).forEach(function(program) { %>
        <tr data-id="<%= program.id %>">
          <td><%= program.title %></td>
          <td>
            <% if (program.icon) { %>
              <img src="data:image/png;base64,<%= program.icon %>" alt="icon" style="max-width:60px;max-height:60px;">
            <% } else { %>
              No Image
            <% } %>
          </td>
          <td><%= program.description %></td>
          <td>
            <button type="button" class="btn btn-info btn-sm view-btn">View</button>
            <button type="button" class="btn btn-warning btn-sm edit-btn">Edit</button>
          </td>
        </tr>
      <% }); %>
    </tbody>
  </table>
</div>

<!-- Modal will be injected by JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="/public/programModal.js"></script>

<%- include('./partials/footer.ejs') %>

